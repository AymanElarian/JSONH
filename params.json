{"note":"Don't delete this file! It's used internally to help with page regeneration.","tagline":"Homogeneous Collection Compressor","body":"[JSONH](http://webreflection.blogspot.com/2011/08/last-version-of-json-hpack.html) - JSON Homogeneous Collections Compressor\r\n============================================================================================================================\r\n\r\nWhat is JSONH\r\n-------------\r\n\r\nJSONH is one of the most performant, yet safe, cross programming language, way to pack and unpack generic homogenous collections.\r\nBased on native or shimmed JSON implementation, JSONH is nothing different than a procedure performed right before `JSON.stringify(data)` or right after `JSON.parse(data)`\r\n\r\n[It is demonstrated](http://jsperf.com/jsonh/2) that overall performances of JSONH are up to 3 times faster in compression and 2 times in parsing thanks to smaller and simplified nature of the collection/string.\r\n\r\nIt is also demonstrated that resulting bandwidth size will be incrementally smaller than equivalent JSON operation reaching, in certain cases, down to 30% of original size and without gzip/deflate compression in place.\r\n\r\nJSONH is the latest version of [json.hpack](https://github.com/WebReflection/json.hpack) project and based on [JSONDB concept](http://michaux.ca/articles/json-db-a-compressed-json-format).\r\n\r\nNew in version 0.0.2 ( JS only )\r\n--------------------------------\r\n * added experimental and optional `schema` argument at the end of all methods in order to parse automatically one or more nested homogenous collections\r\n * covered via unit tests pack/unpack with or without the usage of a schema\r\n\r\n\r\nWhat is an Homogenous Collection\r\n--------------------------------\r\n\r\nUsually a database result set, stored as list of objects where all of them contains the same amount of keys with identical name.\r\nThis is a basic homogeneous collection example: `[{\"a\":\"A\",\"b\":\"B\"},{\"a\":\"C\",\"b\":\"D\"},{\"a\":\"E\",\"b\":\"F\"}]`\r\nWe all have exchange over the network one or more homogenous collections at least once.\r\nJSONH is able to pack the example into `[2,\"a\",\"b\",\"A\",\"B\",\"C\",\"D\",\"E\",\"F\"]` and unpack it into original collection at light speed.\r\n\r\n\r\nJSONH is suitable for\r\n---------------------\r\n\r\n * runtime data compression with or without gzip/deflate on both client and server side\r\n * creation of static JavaScript files to serve in order to save space on Hard Drive and eventually make runtime gzip/deflate compression easier (smaller input)\r\n * send huge collection of data from the client to the server and improving performances over `JSON.stringify(data)` and required network bandwidth\r\n\r\nIf the generic object/data contains one or more homogenous collections, JSONH is suitable for these cases too via `pack` and `unpack` operations.\r\nPlease read the [related post](http://webreflection.blogspot.com/2011/08/jsonh-and-hybrid-js-objects.html) to know more.\r\n\r\n\r\nJSONH API\r\n---------\r\nEvery implementation is suitable for the programming language code style and every method supports original JSON signature.\r\nAs example the JavaScript version is a global `JSONH` object with `stringify`, `parse`, `pack`, and `unpack` methods.\r\n\r\nThe python version is a module similar to `json` one with current methods: `dump`, `dumps`, `load`, `loads`, `pack`, and `unpack`.\r\n\r\n    import jsonh\r\n    \r\n    print(jsonh.dumps(\r\n        [{\"a\": \"A\", \"b\": \"B\"}, {\"a\": \"C\", \"b\": \"D\"}, {\"a\": \"E\", \"b\": \"F\"}],\r\n        separator = (',',':')\r\n    ))\r\n\r\n\r\nThe php 5 version is a static class plus some function in order to let developers decide for their favorite stile.\r\nExtra arguments accepted by `json_encode` and `json_decode` are supported as well.\r\n\r\n    require_once('JSONH.class.php');\r\n    \r\n    // classic style\r\n    jsonh_encode($object); // jsonh_decode($str)\r\n    \r\n    // static public style\r\n    JSONH::stringify($object); // JSONH::parse($str);\r\n    \r\n    // singleton style\r\n    JSONH()->stringify($object); // JSONH()->parse($str)\r\n    \r\n\r\n\r\nTODO\r\n----\r\n\r\n * clean up locally tests and use a standard one able to cover all aspects per each implementation\r\n * C# version, and hopefully with other developers help other languages too\r\n * simplified yet cross platform way to *map* hybrid objects, specifying via white list one or more nested properties to `pack` on stringify, and `unpack` on parse (automated and addressed compression for complex objects)\r\n\r\nJavaScript And Native JSON Escape Problems\r\n------------------------------------------\r\nAs [@garethheyes](https://twitter.com/garethheyes) pointed out by in [this post](http://www.thespanner.co.uk/2011/07/25/the-json-specification-is-now-wrong/), native `JSON.stringify(data)` may produce invalid JavaScript.\r\nSince JSONH aim is *not* to change native JSON behavior, neither is JSONH a replacement for JSON, all I can suggest is to perform this replacement when and if data could be corrupted:\r\n\r\n    JSONH.stringify(data).replace(\r\n        /\\u2028|\\u2029/g,\r\n        function (m) {\r\n            return \"\\\\u202\" + (m === \"\\u2028\" ? \"8\" : \"9\");\r\n        })\r\n\r\nThis will ensure proper escape for those characters plus performances will be still better thanks to reduced string output size (compared with the euivalent operation performed by `JSON.stringify(data)`).","name":"Jsonh","google":""}